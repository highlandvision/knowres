/*! For license information please see site.min.js.LICENSE.txt */
(self.webpackChunkkr=self.webpackChunkkr||[]).push([[641],{400:(t,e,i)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e,i){this.extend(o,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var r=i||{};this.gridSize_=r.gridSize||60,this.minClusterSize_=r.minimumClusterSize||2,this.maxZoom_=r.maxZoom||null,this.styles_=r.styles||[],this.imagePath_=r.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=r.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,null!=r.zoomOnClick&&(this.zoomOnClick_=r.zoomOnClick),this.averageCenter_=!1,null!=r.averageCenter&&(this.averageCenter_=r.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var s=this;google.maps.event.addListener(this.map_,"zoom_changed",(function(){var t=s.map_.getZoom();s.prevZoom_!=t&&(s.prevZoom_=t,s.resetViewport())})),google.maps.event.addListener(this.map_,"idle",(function(){s.redraw()})),e&&e.length&&this.addMarkers(e,!1)}function s(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new n(this,t.getStyles(),t.getGridSize())}function n(t,e,i){t.getMarkerClusterer().extend(n,google.maps.OverlayView),this.styles_=e,this.padding_=i||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}o.prototype.MARKER_CLUSTER_IMAGE_PATH_="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m",o.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",o.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},o.prototype.onAdd=function(){this.setReady_(!0)},o.prototype.draw=function(){},o.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},o.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),i=new google.maps.LatLngBounds,r=0;t=e[r];r++)i.extend(t.getPosition());this.map_.fitBounds(i)},o.prototype.setStyles=function(t){this.styles_=t},o.prototype.getStyles=function(){return this.styles_},o.prototype.isZoomOnClick=function(){return this.zoomOnClick_},o.prototype.isAverageCenter=function(){return this.averageCenter_},o.prototype.getMarkers=function(){return this.markers_},o.prototype.getTotalMarkers=function(){return this.markers_.length},o.prototype.setMaxZoom=function(t){this.maxZoom_=t},o.prototype.getMaxZoom=function(){return this.maxZoom_},o.prototype.calculator_=function(t,e){for(var i=0,r=t.length,o=r;0!==o;)o=parseInt(o/10,10),i++;return{text:r,index:i=Math.min(i,e)}},o.prototype.setCalculator=function(t){this.calculator_=t},o.prototype.getCalculator=function(){return this.calculator_},o.prototype.addMarkers=function(t,e){for(var i,r=0;i=t[r];r++)this.pushMarkerTo_(i);e||this.redraw()},o.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",(function(){t.isAdded=!1,e.repaint()}))}this.markers_.push(t)},o.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},o.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var i,r=0;i=this.markers_[r];r++)if(i==t){e=r;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},o.prototype.removeMarker=function(t,e){var i=this.removeMarker_(t);return!(e||!i)&&(this.resetViewport(),this.redraw(),!0)},o.prototype.removeMarkers=function(t,e){for(var i,r=!1,o=0;i=t[o];o++){var s=this.removeMarker_(i);r=r||s}if(!e&&r)return this.resetViewport(),this.redraw(),!0},o.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},o.prototype.getTotalClusters=function(){return this.clusters_.length},o.prototype.getMap=function(){return this.map_},o.prototype.setMap=function(t){this.map_=t},o.prototype.getGridSize=function(){return this.gridSize_},o.prototype.setGridSize=function(t){this.gridSize_=t},o.prototype.getMinClusterSize=function(){return this.minClusterSize_},o.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},o.prototype.getExtendedBounds=function(t){var e=this.getProjection(),i=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),r=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(i);o.x+=this.gridSize_,o.y-=this.gridSize_;var s=e.fromLatLngToDivPixel(r);s.x-=this.gridSize_,s.y+=this.gridSize_;var n=e.fromDivPixelToLatLng(o),a=e.fromDivPixelToLatLng(s);return t.extend(n),t.extend(a),t},o.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},o.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},o.prototype.resetViewport=function(t){for(var e,i=0;e=this.clusters_[i];i++)e.remove();var r;for(i=0;r=this.markers_[i];i++)r.isAdded=!1,t&&r.setMap(null);this.clusters_=[]},o.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout((function(){for(var e,i=0;e=t[i];i++)e.remove()}),0)},o.prototype.redraw=function(){this.createClusters_()},o.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var i=(e.lat()-t.lat())*Math.PI/180,r=(e.lng()-t.lng())*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},o.prototype.addToClosestCluster_=function(t){for(var e,i=4e4,r=null,o=(t.getPosition(),0);e=this.clusters_[o];o++){var n=e.getCenter();if(n){var a=this.distanceBetweenPoints_(n,t.getPosition());a<i&&(i=a,r=e)}}r&&r.isMarkerInClusterBounds(t)?r.addMarker(t):((e=new s(this)).addMarker(t),this.clusters_.push(e))},o.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),i=this.getExtendedBounds(e),r=0;t=this.markers_[r];r++)!t.isAdded&&this.isMarkerInBounds_(t,i)&&this.addToClosestCluster_(t)},s.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,i=0;e=this.markers_[i];i++)if(e==t)return!0;return!1},s.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,i=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,r=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(i,r),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var o=this.markers_.length;if(o<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),o==this.minClusterSize_)for(var s=0;s<o;s++)this.markers_[s].setMap(null);return o>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},s.prototype.getMarkerClusterer=function(){return this.markerClusterer_},s.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),i=this.getMarkers(),r=0;t=i[r];r++)e.extend(t.getPosition());return e},s.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},s.prototype.getSize=function(){return this.markers_.length},s.prototype.getMarkers=function(){return this.markers_},s.prototype.getCenter=function(){return this.center_},s.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},s.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},s.prototype.getMap=function(){return this.map_},s.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var i,r=0;i=this.markers_[r];r++)i.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var o=this.markerClusterer_.getStyles().length,s=this.markerClusterer_.getCalculator()(this.markers_,o);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(s),this.clusterIcon_.show()}},n.prototype.triggerClusterClick=function(){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},n.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this;google.maps.event.addDomListener(this.div_,"click",(function(){e.triggerClusterClick()}))},n.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10),e},n.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},n.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},n.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},n.prototype.remove=function(){this.setMap(null)},n.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},n.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},n.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.fontFamily_=e.fontFamily,this.fontWeight_=e.fontWeight,this.backgroundPosition_=e.backgroundPosition},n.prototype.setCenter=function(t){this.center_=t},n.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var i=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+i+";"),"object"===r(this.anchor_)?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var o=this.textColor_?this.textColor_:"black",s=this.textSize_?this.textSize_:11,n=this.fontFamily_?this.fontFamily_:"Arial,sans-serif",a=this.fontWeight_?this.fontWeight_:"400";return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+o+"; position:absolute; font-size:"+s+"px; font-family:"+n+"; font-weight:"+a+";"),e.join("")},i.g.MarkerClusterer=o,o.prototype.addMarker=o.prototype.addMarker,o.prototype.addMarkers=o.prototype.addMarkers,o.prototype.clearMarkers=o.prototype.clearMarkers,o.prototype.fitMapToMarkers=o.prototype.fitMapToMarkers,o.prototype.getCalculator=o.prototype.getCalculator,o.prototype.getGridSize=o.prototype.getGridSize,o.prototype.getExtendedBounds=o.prototype.getExtendedBounds,o.prototype.getMap=o.prototype.getMap,o.prototype.getMarkers=o.prototype.getMarkers,o.prototype.getMaxZoom=o.prototype.getMaxZoom,o.prototype.getStyles=o.prototype.getStyles,o.prototype.getTotalClusters=o.prototype.getTotalClusters,o.prototype.getTotalMarkers=o.prototype.getTotalMarkers,o.prototype.redraw=o.prototype.redraw,o.prototype.removeMarker=o.prototype.removeMarker,o.prototype.removeMarkers=o.prototype.removeMarkers,o.prototype.resetViewport=o.prototype.resetViewport,o.prototype.repaint=o.prototype.repaint,o.prototype.setCalculator=o.prototype.setCalculator,o.prototype.setGridSize=o.prototype.setGridSize,o.prototype.setMaxZoom=o.prototype.setMaxZoom,o.prototype.onAdd=o.prototype.onAdd,o.prototype.draw=o.prototype.draw,s.prototype.getCenter=s.prototype.getCenter,s.prototype.getSize=s.prototype.getSize,s.prototype.getMarkers=s.prototype.getMarkers,n.prototype.onAdd=n.prototype.onAdd,n.prototype.draw=n.prototype.draw,n.prototype.onRemove=n.prototype.onRemove,t.exports=o},943:(t,e,i)=>{var r,o,s;function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}o=[i(634)],void 0===(s="function"==typeof(r=function(t){var e=function(){function e(){var e=this,i=function(){var i=["br-wrapper"];""!==e.options.theme&&i.push("br-theme-"+e.options.theme),e.$elem.wrap(t("<div />",{class:i.join(" ")}))},r=function(){e.$elem.unwrap()},o=function(i){return t.isNumeric(i)&&(i=Math.floor(i)),t('option[value="'+i+'"]',e.$elem)},s=function(){var i=e.options.initialRating;return i?o(i):t("option:selected",e.$elem)},a=function(){var i=e.$elem.find('option[value="'+e.options.emptyValue+'"]');return!i.length&&e.options.allowEmpty?(i=t("<option />",{value:e.options.emptyValue})).prependTo(e.$elem):i},l=function(t){var i=e.$elem.data("barrating");return void 0!==t?i[t]:i},h=function(t,i){null!==i&&"object"===n(i)?e.$elem.data("barrating",i):e.$elem.data("barrating")[t]=i},p=function(){var t=s(),i=a(),r=t.val(),o=t.data("html")?t.data("html"):t.text(),n=null!==e.options.allowEmpty?e.options.allowEmpty:!!i.length,l=i.length?i.val():null,p=i.length?i.text():null;h(null,{userOptions:e.options,ratingValue:r,ratingText:o,originalRatingValue:r,originalRatingText:o,allowEmpty:n,emptyRatingValue:l,emptyRatingText:p,readOnly:e.options.readonly,ratingMade:!1})},d=function(){e.$elem.removeData("barrating")},c=function(){return l("ratingText")},u=function(){return l("ratingValue")},m=function(){var i=t("<div />",{class:"br-widget"});return e.$elem.find("option").each((function(){var r,o,s,n;(r=t(this).val())!==l("emptyRatingValue")&&(o=t(this).text(),(s=t(this).data("html"))&&(o=s),n=t("<a />",{href:"#","data-rating-value":r,"data-rating-text":o,html:e.options.showValues?o:""}),i.append(n))})),e.options.showSelectedRating&&i.append(t("<div />",{text:"",class:"br-current-rating"})),e.options.reverse&&i.addClass("br-reverse"),e.options.readonly&&i.addClass("br-readonly"),i},g=function(){return l("userOptions").reverse?"nextAll":"prevAll"},f=function(t){o(t).prop("selected",!0),e.$elem.change()},y=function(){t("option",e.$elem).prop("selected",(function(){return this.defaultSelected})),e.$elem.change()},_=function(t){(t=t||c())==l("emptyRatingText")&&(t=""),e.options.showSelectedRating&&e.$elem.parent().find(".br-current-rating").text(t)},v=function(t){return Math.round(Math.floor(10*t)/10%1*100)},k=function(){e.$widget.find("a").removeClass((function(t,e){return(e.match(/(^|\s)br-\S+/g)||[]).join(" ")}))},w=function(){var i,r,o=e.$widget.find('a[data-rating-value="'+u()+'"]'),s=l("userOptions").initialRating,n=t.isNumeric(u())?u():0,a=v(s);if(k(),o.addClass("br-selected br-current")[g()]().addClass("br-selected"),!l("ratingMade")&&t.isNumeric(s)){if(s<=n||!a)return;i=e.$widget.find("a"),(r=o.length?o[l("userOptions").reverse?"prev":"next"]():i[l("userOptions").reverse?"last":"first"]()).addClass("br-fractional"),r.addClass("br-fractional-"+a)}},M=function(t){return!(!l("allowEmpty")||!l("userOptions").deselectable)&&u()==t.attr("data-rating-value")},x=function(i){i.on("click.barrating",(function(i){var r,o,s=t(this),n=l("userOptions");return i.preventDefault(),r=s.attr("data-rating-value"),o=s.attr("data-rating-text"),M(s)&&(r=l("emptyRatingValue"),o=l("emptyRatingText")),h("ratingValue",r),h("ratingText",o),h("ratingMade",!0),f(r),_(o),w(),n.onSelect.call(e,u(),c(),i),!1}))},b=function(e){e.on("mouseenter.barrating",(function(){var e=t(this);k(),e.addClass("br-active")[g()]().addClass("br-active"),_(e.attr("data-rating-text"))}))},C=function(t){e.$widget.on("mouseleave.barrating blur.barrating",(function(){_(),w()}))},E=function(e){e.on("touchstart.barrating",(function(e){e.preventDefault(),e.stopPropagation(),t(this).click()}))},T=function(t){t.on("click.barrating",(function(t){t.preventDefault()}))},S=function(t){x(t),e.options.hoverState&&(b(t),C(t))},I=function(t){t.off(".barrating")},D=function(t){var i=e.$widget.find("a");E&&E(i),t?(I(i),T(i)):S(i)};this.show=function(){l()||(i(),p(),e.$widget=m(),e.$widget.insertAfter(e.$elem),w(),_(),D(e.options.readonly),e.$elem.hide())},this.readonly=function(t){"boolean"==typeof t&&l("readOnly")!=t&&(D(t),h("readOnly",t),e.$widget.toggleClass("br-readonly"))},this.set=function(t){var i=l("userOptions");0!==e.$elem.find('option[value="'+t+'"]').length&&(h("ratingValue",t),h("ratingText",e.$elem.find('option[value="'+t+'"]').text()),h("ratingMade",!0),f(u()),_(c()),w(),i.silent||i.onSelect.call(this,u(),c()))},this.clear=function(){var t=l("userOptions");h("ratingValue",l("originalRatingValue")),h("ratingText",l("originalRatingText")),h("ratingMade",!1),y(),_(c()),w(),t.onClear.call(this,u(),c())},this.destroy=function(){var t=u(),i=c(),o=l("userOptions");I(e.$widget.find("a")),e.$widget.remove(),d(),r(),e.$elem.show(),o.onDestroy.call(this,t,i)}}return e.prototype.init=function(e,i){return this.$elem=t(i),this.options=t.extend({},t.fn.barrating.defaults,e),this.options},e}();t.fn.barrating=function(i,r){return this.each((function(){var o=new e;if(t(this).is("select")||t.error("Sorry, this plugin only works with select fields."),o.hasOwnProperty(i)){if(o.init(r,this),"show"===i)return o.show(r);if(o.$elem.data("barrating"))return o.$widget=t(this).next(".br-widget"),o[i](r)}else{if("object"===n(i)||!i)return r=i,o.init(r,this),o.show();t.error("Method "+i+" does not exist on jQuery.barrating")}}))},t.fn.barrating.defaults={theme:"",initialRating:null,allowEmpty:null,emptyValue:"",showValues:!1,showSelectedRating:!0,deselectable:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,silent:!1,onSelect:function(t,e,i){},onClear:function(t,e){},onDestroy:function(t,e){}},t.fn.barrating.BarRating=e})?r.apply(e,o):r)||(t.exports=s)},362:(t,e,i)=>{"use strict";var r=i(634);let o,s,n=[],a=!1,l=!1,h=!1,p=!1;!function(t){function e(e,i){t.ajax({type:"POST",url:"/index.php?option=com_knowres&task=property.geriatric&lang="+o,dataType:"html",data:{pid:e},success:function(e){t(i).append(e)}})}function i(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.ajax({url:"/index.php?option=com_knowres&view=properties&format=raw&lang="+o,type:"POST",data:{bar:e,action:i,action_value:s},dataType:"json",success:function(e){if(!e)return void window.location.reload();["list","grid","thumb","favs","map"].includes(e.bar)&&d(e.bar),r(e,e.bar),t(".has-tip").foundation(),t(".dropdown-pane").foundation(),t(".kr-property .card").foundation(),t("#kr-order-close").trigger("click"),a=!0}})}function r(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e&&(t("#kr-properties-data").empty().fadeIn("slow").html(e.items).foundation(),t(".kr-pager").html(e.pagination),"thumb"!==i?t(".kr-pager.bottom").html(e.pagination):t(".kr-pager.bottom").empty(),t("#kr-offcanvas-properties-filter").html(e.filters),t("#kr-offcanvas-properties-sortby").html(e.sortby),e.search.length&&t("#arrivaldsp").length&&t("body").trigger("initajaxsearch"),t(".sidebar .kr-filters ul.filter-sort-list li.head").each((function(){t(this).hasClass("active")?t(this).parent().children("li.filter-item").show():t(this).parent().children("li.filter-item").hide()})),"page"===i&&window.scrollTo(0,0))}function d(e){const i=t(".kr-searchbar").find(".button");t.each(i,(function(e,i){t(i).removeClass("is-active")})),t(".kr-searchbar .button."+e).addClass("is-active")}function c(){p=!1,s=Foundation.MediaQuery.atLeast("large"),s!==h&&(h=s,1)&&n.items&&!p&&(r(n),p=!0)}t((function(){Foundation.addToJquery(),t(document).foundation(),o=t("#kr-lang").data("krlang"),c(),t(window).on("resize",(function(){c()}));const r=t(".kr-rating");r.length&&r.barrating("show",{showValues:!0,showSelectedRating:!1});const s=t("#kr-page-geriatric-calendar-trigger");s.length&&!l&&(e(s.data("pid"),s.data("target")),l=!0),t(document).on("submit",".ajaxform",(function(e){e.preventDefault();const i=t(this);t.ajax({type:"POST",url:i.attr("action")+"&lang="+o,data:i.serialize(),dataType:"json",success:function(e){if(e.success)e.data?function(e,i){if(i.hasOwnProperty("redirect"))window.location.replace(i.redirect);else if("kr-form-payment"===e)if(i.hasOwnProperty("html")){let e=t("#kr-gateway-modal");e.html(i.html).trigger("resizeme.zf.reveal"),e.foundation("open")}else window.location.href="/";else"kr-form-mailchimp"===e&&t("#response2").html(i)}(i.attr("id"),e.data):window.location.href="/";else{t(".kr-ajax-modal-error-message").html(e.message);new Foundation.Reveal(t("#KrAjaxModalError")).open()}},error:function(){t(".kr-ajax-modal-error-message").html("Sorry an error has occurred, please try again");new Foundation.Reveal(t("#KrAjaxModalError")).open()}})})).on("show.zf.dropdown","#kr-searchregion-drop",(function(){t("#kr-searchregion-drop").css("opacity","1")})).on("show.zf.dropdown","#kr-searchguest-drop",(function(){t("#kr-searchguest-drop").css("opacity","1")})).on("hide.zf.dropdown","#kr-searchregion-drop, #kr-searchguest-drop",(function(){t("body").css("opacity","1")})).on("hide.zf.dropdown","#kr-quote-form",(function(){t("#guests").trigger("change")})).on("open.zf.reveal",".kr-ajax-modal[data-reveal]",(function(e){e.preventDefault();const i="#"+t(this).attr("id");if(!t.trim(t(i).html()).length){const e=t(this).data("ajaxurl");e&&t.ajax({type:"POST",url:e,success:function(e){t(i).html(e).trigger("resizeme.zf.reveal"),t(i).foundation()}})}})).on("click",".favspan",(function(e){e.preventDefault();const r=t(this).data("property"),s=t(".kr-searchbar a.is-active").data("bar");t.ajax({type:"POST",url:"/index.php?option=com_knowres&task=properties.favourite&lang="+o,data:{property_id:r},dataType:"json",success:function(t){t.success&&i(s)}})})).on("click",".getResponseSearch",(function(e){e.preventDefault(),void 0===t(this).data("action")?i(t(this).data("bar")):i(t(this).data("bar"),t(this).data("action"),t(this).data("action-value"))})).on("click",".kr-filters-close",(function(e){e.preventDefault(),t(".kr-filters.top").addClass("hideme"),t(this).removeClass("active")})).on("click",".kr-filters ul.filter-sort-list li.head",(function(e){e.preventDefault(),t(this).parent().children("li.filter-item").toggle(),t(this).toggleClass("active")})).on("click","#showgateways",(function(e){e.preventDefault(),t("#kr-gateways").toggleClass("hideme")})).on("click","a.kr-searchbar",(function(e){e.preventDefault(),d(t(this).data("bar"))})).on("click",".toggleother",(function(e){e.preventDefault(),t(this).data("other").toggle()})).on("click",'#kr-property-tabs a[href="#calendar"]',(function(i){if(i.preventDefault(),!l){e(t(this).data("pid"),"#calendar.tabs-panel"),l=!0}})).on("mouseover","#kr-thumb img",(function(){let e=t(this).parent().data("id");if(e){let i=".thumboverview"+e;t("#pinfo").html(t(i).html())}}));let n=t(".kr-properties");n.length&&!a&&i(n.data("bar"));let h=t(".tabs");t("#kr-property-tabs").length&&!l&&h.find("a").each((function(){if("#calendar"===t(this).attr("href")){e(t(this).data("pid"),"#calendar.tabs-panel"),l=!0}}))})),t.event.special.touchstart={setup:function(t,e,i){e.includes("noPreventDefault")?this.addEventListener("touchstart",i,{passive:!1}):this.addEventListener("touchstart",i,{passive:!0})}},t.event.special.touchmove={setup:function(t,e,i){e.includes("noPreventDefault")?this.addEventListener("touchmove",i,{passive:!1}):this.addEventListener("touchmove",i,{passive:!0})}},t.event.special.touchstart={setup:function(t,e,i){e.includes("noPreventDefault")?this.addEventListener("touchstart",i,{passive:!1}):this.addEventListener("touchstart",i,{passive:!0})}},t.event.special.touchmove={setup:function(t,e,i){e.includes("noPreventDefault")?this.addEventListener("touchmove",i,{passive:!1}):this.addEventListener("touchmove",i,{passive:!0})}}}(r)},106:(t,e,i)=>{"use strict";var r=i(634);!function(t){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host);let e,i,o=t("#kr-lang").data("krlang");class s{constructor(t){this.form=t,this.init()}init(){this.updateQuote(this.form)}updateQuote(e){i=t("#mytask"),i.val("confirm.compute"),r.ajax({type:"POST",url:"index.php?option=com_knowres&task=confirm.compute&lang="+o,data:e.serializeArray(),dataType:"json",success:function(e){if(i.val("confirm.payment"),e.success){const i=e.data;let r;i.hasOwnProperty("redirect")&&window.location.replace(i.redirect),t.each(e.data.response,(function(e,i){t(".hideinitial").show(),r="#"+e,t(r).text(i),t(r).html(i),t(r).val(i),t(r).show()}))}else{t(".kr-ajax-modal-error-message").html(e.message);new Foundation.Reveal(t("#KrAjaxModalError")).open()}}})}}t((function(){let i=t("#kr-form-confirm");i.length&&(e=new s(i)),i.on("change click",".kr-calculate",(function(r){r.preventDefault(),i=t("#kr-form-confirm"),e.updateQuote(i)})),t(document).on("click","#checkterms",(function(e){e.preventDefault(),function(){let e=!0;const i=document.getElementById("agreecheck"),r=document.getElementById("agreecheckc"),o=document.getElementById("agreecheckt");i&&!document.getElementById("kr-form-payment").agreecheck.checked&&(e=!1);r&&!document.getElementById("kr-form-payment").agreecheckc.checked&&(e=!1);o&&!document.getElementById("kr-form-payment").agreecheckt.checked&&(e=!1);if(e)return!0;return new Foundation.Reveal(t("#errorModal")).open(),!1}()&&t("#checkterms").trigger("submit")}))}))}(r)},346:(t,e,i)=>{"use strict";var r=i(634);window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host),function(t){let e,i,r=8,o={custom_validation:!1,days_in_month:[31,29,31,30,31,30,31,31,30,31,30,31],document_date:!1,errorbox_x:1,errorbox_y:5,field_hint_text_day:"DD",field_hint_text_month:"MM",field_hint_text_year:"YYYY",field_order:"DMY",field_width_day:6,field_width_month:6,field_width_year:7,field_width_sep:2,minmax:"",min_date:!1,max_date:!1,min_year:1910,month_name:["January","February","March","April","May","June","July","August","September","October","November","December"],on_blur:!1,on_error:!1,on_change:!1,parse_date:!0,separator:"/",show_errors:!0,show_hints:!0,E_DAY_NAN:"Day must be a number",E_DAY_TOO_BIG:"Day must be 1-31",E_DAY_TOO_SMALL:"Day must be 1-31",E_BAD_DAY_FOR_MONTH:"Only %d days in %m %y",E_MONTH_NAN:"Month must be a number",E_MONTH_TOO_BIG:"Month must be 1-12",E_MONTH_TOO_SMALL:"Month cannot be 0",E_YEAR_NAN:"Year must be a number",E_YEAR_LENGTH:"Year must be 4 digits",E_YEAR_TOO_SMALL:"Year must not be before %y",E_MIN_DATE:"Date must not be in the past",E_MAX_DATE:"Date must not be in the future"};class s{constructor(e,r){i=s.getYmd(new Date),this.input_day=0,this.input_month=0,this.input_year=0,this.$element=e,r&&t.extend(o,r),this.init()}static getYmd(t){const e=t.getMonth()+1,i=t.getDay();return t.getFullYear()+"-"+(e<10?"0":"")+e+"-"+(i<10?"0":"")+i}static getYmdObject(t){return t.year+"-"+t.month+"-"+t.day}addEntryFields(){let e=this;e.fields=[],t.each(o.field_order.split(""),(function(t,i){switch(i){case"D":e.buildField("day",t);break;case"M":e.buildField("month",t);break;case"Y":e.buildField("year",t);break;default:throw"Unexpected field order '"+i+"' expected D, M or Y"}}))}afterPaste(e){this.parseDate(t(e).val())&&this.setDate(t(e).val())}buildField(e,i){let r=new n({name:e,krdobentry:this,index:i,hint_text:o.show_hints?o["field_hint_text_"+e]:null});this.inner.append(r.$input),this["input_"+e]=r,i<2&&this.inner.append(t('<span class="separator" />').text(o.separator)),this.fields[i]=r,this[e]=r}buildUi(){let e=this;this.wrapper=t(this.$element.wrap('<span class="jq-dte" />').parent()[0]),this.inner=t('<span class="jq-dte-inner" />'),this.addEntryFields(),this.errorbox=t('<span class="jq-dte-errorbox" />').hide(),this.inner.on("paste","input",(function(t){let i=this;setTimeout((function(){e.afterPaste(i,t)}),2)})),this.wrapper.append(this.inner,this.errorbox),this.setFieldWidths(),this.$element.hide()}checkDocument(t,e,i){let r=document.getElementsByClassName(i);for(let i=0;i<r.length;i++)new Date(t)>new Date(e)?r[i].style.display="none":r[i].style.display="block"}clear(){this.clearError(""),this.setDate("")}clearError(){delete this.error_text,this.showError()}destroy(){this.$element.show(),this.$element.css("display",""),this.wrapper.find("span").remove(),this.$element.unwrap(),this.$element.removeData("datetextentry"),delete this.inner,delete this.wrapper,delete this.$element}focus(){this.fields[0].setFocus(!0)}focusFieldBefore(t){const e=t.index;e<1||(this.fields[e].yieldFocus(),this.fields[e-1].setFocus(!0))}focusFieldAfter(t){const e=t.index;e>1||(this.fields[e].yieldFocus(),this.fields[e+1].setFocus(!0))}focusIn(){this.wrapper.addClass("focus")}focusOut(){o.on_blur&&setTimeout((function(){self.widgetFocusLost()}),2),this.wrapper.removeClass("focus")}getDate(){return this.day_value&&this.month_value&&this.year_value?{day:this.day_value,month:this.month_value,year:this.year_value}:null}init(){o.min_year||(o.min_year="1910"),this.buildUi(),this.setDate(this.$element.attr("value")),this.proxyLabelClicks()}parseDate(t){return this.parseIsoDate(t)}parseIsoDate(t){return t&&t.match(/^(\d\d\d\d)-(\d\d)-(\d\d)/)?{day:RegExp.$3,month:RegExp.$2,year:RegExp.$1}:null}proxyLabelClicks(){let e=this,i=this.$element.attr("id");i&&t("label[for="+i+"]").click((function(){e.focus()}))}setDate(e){let i=this;e=this.parseDate(e),delete this.day_value,delete this.month_value,delete this.year_value,this.input_day.set(e?e.day:""),this.input_month.set(e?e.month:""),this.input_year.set(e?e.year:""),this.clearError(),this.$element.val(e),e&&t.each(this.fields,(function(t,e){i.validate(e)}))}setError(t){this.error_text=t,this.showError()}setFieldWidths(){let t=this.$element.width()-2,e=o.field_width_year+o.field_width_sep+o.field_width_month+o.field_width_sep+o.field_width_day;this.input_day.setWidth(Math.floor(o.field_width_day*t/e)),this.input_month.setWidth(Math.floor(o.field_width_month*t/e)),this.input_year.setWidth(Math.floor(o.field_width_year*t/e))}setReadonly(t){void 0===t&&(t=!0),this.input_day.setReadonly(t),this.input_month.setReadonly(t),this.input_year.setReadonly(t),t?this.wrapper.addClass("readonly"):this.wrapper.removeClass("readonly")}showError(){let t=this.widgetErrorText();if(this.on_error&&this.on_error(t),o.show_errors)if(""===t)this.errorbox.hide(),this.errorbox.text("");else{let e=this.inner.outerWidth()+o.errorbox_x+"px",i=o.errorbox_y+"px";this.errorbox.css({display:"block",position:"absolute",top:i,left:e}),this.errorbox.text(t),this.errorbox.show()}}validate(t){if(this.$element.val(""),t){const e=t.name;try{"day"===e?this.validateDay():"month"===e?this.validateMonth():"year"===e&&this.validateYear(),t.clearError()}catch(e){return t.setError(e),!1}}if(this.day_value&&this.month_value){this.clearError();try{if(this.validateDaysInMonth(),this.year_value&&4===this.year_value.length){this.validateCompleteDate();let t=s.getYmdObject(this.getDate());this.$element.val(t),this.$element.data("childdob")&&this.checkDocument(t,this.$element.data("childdob"),this.$element.attr("id"))}}catch(t){return this.setError(t),!1}}else this.clearError();return!0}validateCompleteDate(){const t=this.getDate(),e=s.getYmdObject(t);if(o.minmax=this.$element.data("validation"),"max"===o.minmax&&e>i)throw o.E_MAX_DATE;if("min"===o.minmax&&e<i)throw o.E_MIN_DATE;this.custom_validation&&(t.date=new Date(parseInt(t.year,10),parseInt(t.month,10)-1,parseInt(t.day,10)),this.custom_validation(t))}validateDay(){let t=o,e=this.input_day;this.day_value=void 0;let i=e.get();if(""===i||"0"===i&&e.has_focus)return;if(i.match(/\D/))throw t.E_DAY_NAN;let r=parseInt(i,10);if(r<1)throw t.E_DAY_TOO_SMALL;if(r>31)throw t.E_DAY_TOO_BIG;i=r<10?"0"+r:""+r,e.has_focus||e.set(i),this.day_value=i}validateDaysInMonth(){const t=parseInt(this.day_value,10),e=parseInt(this.month_value,10),i=parseInt(this.year_value,10);if(t<1||e<1)return;let r=o.days_in_month[e-1],s=o.E_BAD_DAY_FOR_MONTH;if(2===e&&4===(""+i).length?(r=i%4?28:i%100?29:i%400?28:29,s=s.replace(/%y/,i.toString())):s=s.replace(/ *%y/,""),t>r)throw s.replace(/%d/,r.toString()).replace(/%m/,o.month_name[e-1])}validateMonth(){let t=this.input_month;this.month_value=void 0;let e=t.get();if(""===e||"0"===e&&t.has_focus)return;if(e.match(/\D/))throw o.E_MONTH_NAN;let i=parseInt(e,10);if(i<1)throw o.E_MONTH_TOO_SMALL;if(i>12)throw o.E_MONTH_TOO_BIG;e=i<10?"0"+i:""+i,t.has_focus||t.set(e),this.month_value=e}validateYear(){const t=this.input_year;this.year_value=void 0;let e=t.get();if(!(""===e||"0"===e&&t.has_focus)){if(e.match(/\D/))throw o.E_YEAR_NAN;if(t.has_focus){if(e.length>4)throw o.E_YEAR_LENGTH}else if(4!==e.length)throw o.E_YEAR_LENGTH;if(4===e.length){const t=parseInt(e,10);if(o.min_year&&t<o.min_year)throw o.E_YEAR_TOO_SMALL.replace(/%y/,o.min_year)}this.year_value=e}}widgetErrorText(){let e="";return t.each(this.fields,(function(t,i){i.error_text&&(i.has_focus||""===e)&&(e=i.error_text)})),""===e&&this.error_text&&(e=this.error_text),e}widgetFocusLost(){o.on_blur&&!this.wrapper.is(".focus")&&o.onBlur()}}class n{constructor(e){const i=this;this.dobfield=e.krdobentry,this.name=e.name,this.index=e.index,this.hint_text=e.hint_text,this.has_focus=!1,this.empty=!0,this.$input=t('<input type="text" value="" />').addClass("jq-dte-"+this.name).attr("aria-label"," ("+this.hint_text+")").focus(t.proxy(i,"focus")).blur(t.proxy(i,"blur")).keydown((function(t){setTimeout((function(){i.keydown(t)}),2)})).keyup((function(t){setTimeout((function(){i.keyup(t)}),2)}))}blur(){this.has_focus=!1,this.dobfield.focusOut(),this.show_hint(),this.dobfield.validate(this)}clearError(){delete this.error_text,this.$input.removeClass("error")}focus(){this.key_is_down=!1,this.$input.prop("readonly")||(this.has_focus=!0,this.dobfield.focusIn(),this.$input.hasClass("hint")&&this.$input.val("").removeClass("hint"),this.dobfield.showError())}get(){let t=this.$input.val();return t===this.hint_text?"":t}isDigitKey(t){let e=t.which;return e>=48&&e<=57||e>=96&&e<=105}keydown(){this.key_is_down=!0}keyup(t){if(!this.key_is_down)return;if(t.which===r&&this.empty)return this.dobfield.focusFieldBefore(this);let e=this.get();if(this.empty=""===e,e.match(/[\/\\. -]/)&&(e=e.replace(/[\/\\. -]/,""),this.set(e),!this.empty&&this.index<2&&this.dobfield.focusFieldAfter(this)),this.dobfield.validate(this)){let i="year"===this.name?4:2;this.isDigitKey(t)&&e.length===i&&this.dobfield.focusFieldAfter(this)}}left(){return this.$input.position().left}set(t){return this.$input.val(t).removeClass("hint"),this.has_focus||this.show_hint(),this.empty=""===t,this.clearError(),this}setError(t){this.error_text=t,this.$input.addClass("error"),this.dobfield.showError()}setFocus(t){let e=this.$input;return e.focus(),t?e.select():e.val(e.val()),this}setWidth(t){return this.$input.width(t),this}show_hint(){return""===this.get()&&"string"==typeof this.hint_text&&this.$input.val(this.hint_text).addClass("hint"),this}yieldFocus(){this.$input.blur()}}t(document).ready((function(){t(".dobissue").each((function(){e=new s(t(this),{})}))}))}(r)},808:(t,e,i)=>{"use strict";!function(t){function e(t){let e=document.getElementsByClassName("amitem");for(let t=0;t<e.length;t++)e[t].classList.remove("active");document.getElementById("air-data").style.display="none",document.getElementById("train-data").style.display="none",document.getElementById("auto-data").style.display="none",document.getElementById("other-data").style.display="none";let i=t+"-data";document.getElementById(i).style.display="block",document.getElementById(t).classList.add("active"),document.getElementById("jform_arrival_means").value=t}t((function(){if(document.getElementById("howtoarrive")){let t=document.getElementById("howtoarrive").getAttribute("data-means");t||(t="air"),e(t)}t("body").on("click",".amitem",(function(i){i.preventDefault(),e(t(this).attr("id"))}))}))}(i(634))},230:(t,e,i)=>{"use strict";var r=i(634);const o="en";!function(t){const e={type:"poly",coords:[1,1,1,32,37,32,32,1]};let i,s,n,a,l,h,p,d,c,u=!1,m={propertyMarkers:[],filterIds:[],mapMarkers:[],mapTypeId:"",mapZoom:0,mapMaxZoom:20,mapType:"",mapId:"",markerColor:"red"};class g{constructor(t){this.settings=t,this.gmOptions={scrollwheel:!1,zoom:this.settings.mapZoom,maxZoom:this.settings.mapMaxZoom,mapTypeId:this.settings.mapTypeId,streetViewControl:!1},n=this.settings.mapZoom,this.gmarkers=[],this.count=0,this.initMap()}static closeKrInfowindow(){t("#kr-infowindow").hide(),a.close(),l.close()}static showVisibleMarkers(t){let e=s.getBounds(),i=0;for(let r=0;r<t.length;r++){let o=t[r];"map"===o.type&&(!0===e.contains(o.getPosition())?(o.setVisible(!0),i++):o.setVisible(!1))}return i}checkDuplicate(t){if(this.gmarkers.length>0){let e=0;for(let i=0;i<this.gmarkers.length;i++){let r=this.gmarkers[i].getPosition();if(t.equals(r)){e++;let i=360/e,o=r.lat()+-2e-5*Math.cos(+i*e/180*Math.PI),s=r.lng()+-0*Math.sin(+i*e/180*Math.PI);t=new google.maps.LatLng(o,s)}}}return t}checkZoom(){if(n>0){let t=s.addListener("idle",(function(){n>0&&s.getZoom()!==n&&(s.setZoom(n),t.remove())}))}}clusterMap(){this.setPropertyMarkers(),this.setMapMarkers();for(let t=0;t<this.gmarkers.length;t++){let e=this.gmarkers[t];"property"===e.type&&(this.settings.filterIds.includes(e.pid)?e.setVisible(!0):e.setVisible(!1))}c=new MarkerClusterer(s,this.gmarkers,{gridSize:20,ignoreHiddenMarkers:!0,imagePath:"/media/com_knowres/images/markerclusterer/m"}),google.maps.event.addListener(c,"clusterclick",(function(){t("#kr-infowindow").hide(),a.close()})),s.fitBounds(h),s.setCenter(h.getCenter())}createMap(){s=new google.maps.Map(document.getElementById(this.settings.mapId),this.gmOptions),a=new google.maps.InfoWindow,l=new google.maps.InfoWindow,h=new google.maps.LatLngBounds}createMapMarker(t,i,r,o,n,a){let h=new google.maps.Marker({shape:e,link:n,icon:r,position:t,title:a,map:s,zIndex:999});google.maps.event.addListener(h,"mouseover",function(t){return function(){l.setContent(t),l.open(s,h)}}(i)),google.maps.event.addListener(h,"mouseout",(function(){l.close()})),google.maps.event.addListener(h,"closeclick",(function(){l.close()})),this.gmarkers.push(h),this.count++}createPropertyMarker(e,i,r,o,n,l,d,c,u){let m=new google.maps.Marker({position:e,link:o,map:s,icon:c,title:n,pid:u,type:"property",zIndex:this.count+1e3});p=document.getElementById(d),m.addListener("mousedown",function(e){return function(){a.close(),t("#kr-infowindow").hide(),a.setContent(i),a.open(s,m),t.ajax({type:"POST",url:"/index.php?option=com_knowres&task=property.mapinfowindow&lang=en",data:{id:parseInt(e)},success:function(e){t("#kr-infowindow").fadeIn(400).html(e).show(),t(".kr-infowindow-slideshow").not(".slick-initialized").slick({nextArrow:'<i class="slick-nav next fa-solid fa-chevron-right "></i>',prevArrow:'<i class="slick-nav prev fa-solid fa-chevron-left "></i>',autoplay:!0})}})}}(r)),google.maps.event.addListener(m,"closeclick",(function(){t("#kr-infowindow").hide(),a.close()})),this.gmarkers.push(m),h.extend(e),this.count++}initMap(){this.createMap(),"cluster"===this.settings.mapType?this.clusterMap():this.soloMap()}refreshMap(t){if("solo"===this.settings.mapType)return;let e=this;r.ajax({url:"/index.php?option=com_knowres&task=properties.refreshmap&lang=en",type:"POST",dataType:"json",success:function(i){if(i.success){e.settings.filterIds=i.data.filterIds;for(let t=0;t<e.gmarkers.length;t++){let i=e.gmarkers[t];"property"===i.type&&(e.settings.filterIds.includes(i.pid)?i.setVisible(!0):i.setVisible(!1))}c.repaint(),new Foundation.Reveal(t),t.foundation("open"),google.maps.event.trigger(s,"resize"),t.foundation("open")}else window.alert(i.message)}})}resetMap(){a.close(),l.close(),t("#kr-infowindow").hide(),s.fitBounds(h),s.setCenter(h.getCenter())}setMapMarkers(){let t,e;for(let i=0;i<this.settings.mapMarkers.length;i++){e=this.settings.mapMarkers[i];let r={url:e.icon,size:new google.maps.Size(32,37),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,18)};t=new google.maps.LatLng(e.lat,e.lng),t=this.checkDuplicate(t),this.createMapMarker(t,e.html,r,"","",e.title)}}setPropertyMarkers(){let t,e;for(let i=0;i<this.settings.propertyMarkers.length;i++)e=this.settings.propertyMarkers[i],i||(d={url:e.icon,size:new google.maps.Size(32,37),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,20)}),t=new google.maps.LatLng(e.lat,e.lng),t=this.checkDuplicate(t),this.createPropertyMarker(t,e.html,e.boxinfo,e.link,e.title,e.color,e.id,d,e.pid)}soloMap(){if(this.setPropertyMarkers(),this.setMapMarkers(),s.fitBounds(h),s.setCenter(h.getCenter()),this.settings.mapMarkers.length>0){const t=this;let e=google.maps.event.addListener(s,"idle",(function(){let i=0,r=s.getZoom();for(;!i;){if(i=g.showVisibleMarkers(t.gmarkers),i){e.remove(),s.setZoom(r);break}if(r-=1,r<10)break}}))}}}t((function(){let e;if(t("body").on("click",".map-trigger",(function(r){r.preventDefault(),u?i.refreshMap(e):(a(t(this)),e=t("#kr-search-map-modal"),e.foundation("open"))})).on("click",".resetmap",(function(t){t.preventDefault(),i.resetMap()})).on("click","#kr-search-map-full-infowindow-close",(function(t){t.preventDefault(),g.closeKrInfowindow()})).on("click",".closemap",(function(i){i.preventDefault(),e.foundation("close"),t.ajax({type:"POST",url:"/index.php?option=com_knowres&task=properties.mapsession&lang=en",success:function(){return t(".kr-searchbar .button.map").removeClass("is-active"),t(".kr-searchbar .button.list").addClass("is-active"),!0}})})).on("open.zf.reveal","#kr-search-map-modal",(function(e){e.preventDefault(),t("#kr-search-map-full").height(t("#kr-search-map-modal").height()),google.maps.event.trigger(s,"resize"),t.ajax({type:"POST",url:"/index.php?option=com_knowres&task=properties.mapsession&lang=en",data:{map_modal:"1"},success:function(){return!0}})})),!u){const e=t("#kr-map-solo-trigger");e.one("click",(function(){a(e)})),-1!==window.location.href.indexOf("#map")&&e.length&&a(e)}const n=t(".map-trigger");function a(t){let e=0;"solo"===t.data("type")&&(e=t.data("pid")),r.ajax({url:"/index.php?option=com_knowres&task=properties.mapdata&pid="+e+"&lang="+o,type:"POST",dataType:"json",success:function(e){e.success?(m={mapId:t.data("target"),mapType:t.data("type"),mapTypeId:t.data("maptypeid"),mapZoom:parseInt(t.data("zoom")),mapMaxZoom:parseInt(t.data("zoommax")),propertyMarkers:e.data.propertyMarkers,mapMarkers:e.data.mapMarkers,filterIds:e.data.filterIds},i=new g(m),u=!0):window.alert(e.message)}})}n.data("forcemap")&&n.trigger("click")}))}(r)},616:(t,e,i)=>{"use strict";var r=i(634);!function(t){let e,i,o,s,n,a,l,h=!1,p=[],d=[],c={lat:"",lng:"",name:"",icon:"",detour:"",mapZoom:9,mapMaxZoom:20,mapTypeId:"roadmap",mapId:"kr-map-route",directionsPanel:"kr-directions-panel",directionsService:null};class u{constructor(e,i){this.settings=c,i&&t.extend(this.settings,i),this.settings.directionsService=new google.maps.DirectionsService,this.init()}static clearRouteMarkers(){for(let t=0;t<p.length;t++)p[t].setMap(null)}static clearWaypoints(){s=null,p=[],d=[],h=!1}addRouteMarker(t){p.push(new google.maps.Marker({position:t,map:o,icon:this.settings.detour}))}calcRoute(){let t,e=document.getElementById("from_address").value,r="";switch("Address"===e&&(e=""),e&&(r=e+","),document.getElementById("mode").value){case"bicycling":t=google.maps.DirectionsTravelMode.BICYCLING;break;case"driving":t=google.maps.DirectionsTravelMode.DRIVING;break;case"walking":t=google.maps.DirectionsTravelMode.WALKING}if(r){let e={origin:r,destination:n,waypoints:d,travelMode:t,avoidHighways:document.getElementById("highways").checked,avoidTolls:document.getElementById("tolls").checked};l=this,this.settings.directionsService.route(e,(function(t,e){e===google.maps.DirectionsStatus.OK?i.setDirections(t):(alert("Google couldn`t calculate directions for this route and selected options"),l.resetRoute())}))}u.clearRouteMarkers(),h=!0}init(){n=new google.maps.LatLng(this.settings.lat,this.settings.lng),this.myOptions={scrollwheel:!1,zoom:this.settings.mapZoom,maxZoom:this.settings.mapMaxZoom,mapTypeId:this.settings.mapTypeId,streetViewControl:!1,center:n},o=new google.maps.Map(document.getElementById(this.settings.mapId),this.myOptions),i=new google.maps.DirectionsRenderer,i.setMap(o),i.setPanel(document.getElementById(this.settings.directionsPanel));new google.maps.MarkerImage(this.settings.icon);a=new google.maps.LatLng(this.settings.lat,this.settings.lng),l=this,google.maps.event.addListener(o,"click",(function(t){d.length<9?(d.push({location:t.latLng,stopover:!0}),a=t.latLng,l.addRouteMarker(a)):alert("Maximum number of 9 waypoints reached")})),l=this,google.maps.event.addListenerOnce(o,"idle",(function(){google.maps.event.trigger(o,"resize"),l.calcRoute()}))}resetRoute(){u.clearRouteMarkers(),u.clearWaypoints(),i.setMap(null),i.setPanel(null),i=new google.maps.DirectionsRenderer,i.setMap(o),i.setPanel(document.getElementById(this.settings.directionPanel)),this.init()}}t(document).ready((function(){t(".kr-directions-modal").on("click","#kr-map-route",(function(i){let r=t(this);const o={lat:r.data("lat"),lng:r.data("lng"),name:r.data("name"),icon:r.data("icon"),detour:r.data("detour")};e=new u(r,o)})).on("click",".resetroute",(function(t){t.preventDefault(),e.resetRoute()})).on("click",".calcroute",(function(t){t.preventDefault(),e.calcRoute()})),r("a#geocodeAddress").on("click",(function(t){t.preventDefault();let e=r("#jform_property_street").val()+", "+r("#jform_town_id").find(":selected").text()+" "+r("#jform_property_postcode").val()+", "+r("#jform_region_id").find(":selected").text()+" "+r("#jform_country_id").find(":selected").text(),i=[];r.ajax({type:"POST",url:"index.php?option=com_knowres&task=property.geocode",data:{address:e},dataType:"json",success:function(t){r.each(t,(function(t,e){r("#"+t).val(e),i[t]=e,myGmap.refreshMap(i.lat,i.lng,!1)}))}})}))}))}(r)},427:(t,e,i)=>{"use strict";i(943),i(400),i(362),i(106),i(346),i(808),i(230),i(616)}},t=>{t.O(0,[592],(()=>{return e=427,t(t.s=e);var e}));t.O()}]);