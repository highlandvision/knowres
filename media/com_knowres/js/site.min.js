/*! For license information please see site.min.js.LICENSE.txt */
(self.webpackChunkkr=self.webpackChunkkr||[]).push([[641],{209:(t,e,i)=>{"use strict";var o=i(634);let r,s,n=[],a=!1,l=!1,h=!1,d=!1;window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host);const c=window.location.origin+"/";!function(t){function e(e,l){t.ajax({url:c+"index.php?option=com_knowres&view=properties&format=raw&lang="+r,type:"POST",data:{field:e,value:l},dataType:"json",success:function(r){n=r,n?("order"!==e&&"view"!==e&&"favs"!==e&&"map"!==e||o(n.view),i(n,e),t(".has-tip").foundation(),t(".dropdown-pane").foundation(),s||"order"!==e||t("#sortby").trigger("click"),a=!0):window.location.reload()}})}function i(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e&&(t("#kr-properties-data").empty().fadeIn("slow").html(e.items).foundation(),t(".kr-pager").html(e.pagination),!0===s?(t("#kr-properties-search-off-canvas").html(""),t("#kr-properties-filters-off-canvas").html(""),t("#kr-properties-sortby-off-canvas").html(""),t("#kr-sidebar-search").empty().html(e.search),t("#kr-properties-filters").empty().html(e.filters),t("#kr-properties-sortby").empty().html(e.sortby).addClass("hideme")):(t("#kr-properties-filters").html(""),t("#kr-properties-sortby").html(""),t("#kr-sidebar-search").html(""),t("#kr-properties-filters-off-canvas").html(e.filters),t("#kr-properties-sortby-off-canvas").html(e.sortby),t("#kr-properties-search-off-canvas").html(e.search)),e.search.length&&t("#arrivaldsp").length&&t("body").trigger("initajaxsearch"),t(".sidebar .kr-filters ul.filter-sort-list li.head").each((function(){t(this).hasClass("active")?t(this).parent().children("li.checkbox").show():t(this).parent().children("li.checkbox").hide()})),"page"===i&&window.scrollTo(0,0))}function o(e){const i=t(".kr-searchbar").find("li");t.each(i,(function(e,i){t(i).removeClass("is-active")}));t(".kr-searchbar li."+e).addClass("is-active")}function p(){d=!1,s=Foundation.MediaQuery.atLeast("large"),s!==h&&(h=s,1)&&n.items&&!d&&(i(n),d=!0)}t((function(){Foundation.addToJquery(),t(document).foundation(),r=t("#kr-lang").data("krlang"),p(),t(window).on("resize",(function(){p()}));const i=t(".kr-rating");i.length&&i.barrating("show",{showValues:!0,showSelectedRating:!1}),t(document).on("submit",".ajaxform",(function(e){e.preventDefault();const i=t(this);t.ajax({type:"POST",url:i.attr("action")+"&lang="+r,data:i.serialize(),dataType:"json",success:function(e){if(e.success)e.data?function(e,i){if(i.hasOwnProperty("redirect"))window.location.replace(i.redirect);else if("kr-form-payment"===e)if(i.hasOwnProperty("html")){let e=t("#kr-gateway-modal");e.html(i.html).trigger("resizeme.zf.reveal"),e.foundation("open")}else window.location.href=c;else"kr-form-mailchimp"===e&&t("#response2").html(i)}(i.attr("id"),e.data):window.location.href=c;else{t(".kr-ajax-modal-error-message").html(e.message);new Foundation.Reveal(t("#KrAjaxModalError")).open()}},error:function(){t(".kr-ajax-modal-error-message").html("Sorry an error has occurred, please try again");new Foundation.Reveal(t("#KrAjaxModalError")).open()}})})).on("hide.zf.dropdown","#kr-quote-form",(function(){t("#guests").trigger("change")})).on("open.zf.reveal",".kr-ajax-modal[data-reveal]",(function(e){e.preventDefault();const i="#"+t(this).attr("id");if(!t.trim(t(i).html()).length){const e=t(this).data("ajaxurl");e&&t.ajax({type:"POST",url:e,success:function(e){t(i).html(e).trigger("resizeme.zf.reveal"),t(i).foundation()}})}})).on("click",".favspan",(function(e){e.preventDefault();const i=t(this);t.ajax({type:"POST",url:c+"index.php?option=com_knowres&task=properties.favourite&lang="+r,data:{property_id:i.data("property"),view:i.data("view")},dataType:"json",success:function(e){if(e.success)if("hideme"===e.data.action){const e="#"+i.find(".has-tip").data("toggle");t(e).remove(),i.parents(".kr-properties .kr-property .favs:first").hide("slow")}else if("none"!==e.data.action){const o=i.find("i.fa-heart");o.toggleClass("in");const r="#"+o.data("toggle");t(r).text(e.data.action).hide()}}})})).on("click",".getResponseSearch",(function(i){i.preventDefault(),e(t(this).data("field"),t(this).data("value"))})).on("click",".kr-filters-close",(function(e){e.preventDefault(),t(".kr-filters.top").addClass("hideme"),t(this).removeClass("active")})).on("click",".sidebar .kr-filters ul.filter-sort-list li.head",(function(e){e.preventDefault(),t(this).parent().children("li.checkbox").toggle(),t(this).toggleClass("active")})).on("click","#showgateways",(function(e){e.preventDefault(),t("#kr-gateways").toggleClass("hideme")})).on("click","#kr-show-sortby",(function(e){e.preventDefault(),t(".kr-filters.top").addClass("hideme"),t(".kr-sortby.top").toggleClass("hideme"),o("sort")})).on("click","#kr-show-filterby",(function(e){e.preventDefault(),t(".kr-sortby.top").addClass("hideme"),t(".kr-filters.top").toggleClass("hideme"),o("filter")})).on("click",".kr-filters-close",(function(e){e.preventDefault(),t(".kr-filters.top").addClass("hideme"),o("list")})).on("click",".toggleother",(function(e){e.preventDefault(),t(this).data("other").toggle()})),t(".kr-properties").length&&!a&&e("view",t(this).data("view"));let s=t(".tabs");t("#kr-property-tabs").length&&!l&&s.find("a").each((function(){if("#calendar"===t(this).attr("href")){!function(e){t.ajax({type:"POST",url:c+"index.php?option=com_knowres&task=property.geriatric&lang="+r,dataType:"html",data:{pid:e},success:function(e){t("#calendar.tabs-panel").append(e)}})}(t(this).data("pid")),l=!0}}))})),t.event.special.touchstart={setup:function(t,e,i){e.includes("noPreventDefault")?this.addEventListener("touchstart",i,{passive:!1}):this.addEventListener("touchstart",i,{passive:!0})}},t.event.special.touchmove={setup:function(t,e,i){e.includes("noPreventDefault")?this.addEventListener("touchmove",i,{passive:!1}):this.addEventListener("touchmove",i,{passive:!0})}},t.event.special.touchstart={setup:function(t,e,i){e.includes("noPreventDefault")?this.addEventListener("touchstart",i,{passive:!1}):this.addEventListener("touchstart",i,{passive:!0})}},t.event.special.touchmove={setup:function(t,e,i){e.includes("noPreventDefault")?this.addEventListener("touchmove",i,{passive:!1}):this.addEventListener("touchmove",i,{passive:!0})}}}(o)},723:()=>{"use strict";document.querySelectorAll(".countrychain").forEach((t=>{t.addEventListener("change",(e=>{e.preventDefault();let i=document.getElementById(t.dataset.target);(async function(t){let e=new URLSearchParams;e.append("country_id",t);const i={method:"POST",body:e},o=await fetch("index.php?option=com_knowres&task=regions.chained",i);if(o.ok){let t=await o.json();if(t.success)return t.data;alert(t.message)}else alert("Sorry we have enountered a problem please try again or contact us")})(t.value).then((t=>{i.options.length>0&&(i.options.length=0);for(let e=0;e<t.k.length;e++)i.options[i.options.length]=new Option(t.v[e],t.k[e])}))}))}),!1),document.addEventListener("DOMContentLoaded",(function(){let t=document.getElementById("jform_country_id");if(void 0!==t&&null!=t){let e=new Event("change");t.dispatchEvent(e)}}))},240:(t,e,i)=>{"use strict";var o=i(634);!function(t){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host);const e=window.location.origin+"/";let i,r=t("#kr-lang").data("krlang");class s{constructor(t){this.form=t,this.init()}init(){this.updateQuote(this.form)}updateQuote(i){o.ajax({type:"POST",url:e+"index.php?option=com_knowres&task=confirm.compute&lang="+r,data:i.serializeArray(),dataType:"json",success:function(e){if(e.success){const i=e.data;let o;i.hasOwnProperty("redirect")&&window.location.replace(i.redirect),t.each(e.data.response,(function(e,i){t(".hideinitial").show(),o="#"+e,t(o).text(i),t(o).html(i),t(o).val(i),t(o).show()}))}else{t(".kr-ajax-modal-error-message").html(e.message);new Foundation.Reveal(t("#KrAjaxModalError")).open()}}})}}t((function(){let e=t("#kr-form-confirm");e.length&&(i=new s(e)),e.on("change, click",".kr-calculate",(function(o){o.preventDefault(),e=t("#kr-form-confirm"),i.updateQuote(e)})),t(document).on("submit",".jsonform",(function(e){e.preventDefault();const i=t(this);t.ajax({type:"POST",url:i.attr("action")+"&lang="+r,data:i.serialize(),dataType:"json",success:function(e){if(e.success)window.location.href=e.data.redirect;else{t(".kr-ajax-modal-error-message").html(e.message);new Foundation.Reveal(t("#KrAjaxModalError")).open()}},error:function(){t(".kr-ajax-modal-error-message").html("Sorry an error has occurred, please try again");new Foundation.Reveal(t("#KrAjaxModalError")).open()}})})).on("click","#checkterms",(function(e){e.preventDefault(),function(){let e=!0;const i=document.getElementById("agreecheck"),o=document.getElementById("agreecheckc"),r=document.getElementById("agreecheckt");i&&!document.getElementById("kr-form-payment").agreecheck.checked&&(e=!1);o&&!document.getElementById("kr-form-payment").agreecheckc.checked&&(e=!1);r&&!document.getElementById("kr-form-payment").agreecheckt.checked&&(e=!1);if(e)return!0;return new Foundation.Reveal(t("#errorModal")).open(),!1}()&&t("#checkterms").trigger("submit")}))}))}(o)},893:(t,e,i)=>{"use strict";var o=i(634);window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host),function(t){let e,i,o=8,r={custom_validation:!1,days_in_month:[31,29,31,30,31,30,31,31,30,31,30,31],document_date:!1,errorbox_x:1,errorbox_y:5,field_hint_text_day:"DD",field_hint_text_month:"MM",field_hint_text_year:"YYYY",field_order:"DMY",field_width_day:6,field_width_month:6,field_width_year:7,field_width_sep:2,max_date:!1,min_year:1910,month_name:["January","February","March","April","May","June","July","August","September","October","November","December"],on_blur:!1,on_error:!1,on_change:!1,parse_date:!0,separator:"/",show_errors:!0,show_hints:!0,E_DAY_NAN:"Day must be a number",E_DAY_TOO_BIG:"Day must be 1-31",E_DAY_TOO_SMALL:"Day must be 1-31",E_BAD_DAY_FOR_MONTH:"Only %d days in %m %y",E_MONTH_NAN:"Month must be a number",E_MONTH_TOO_BIG:"Month must be 1-12",E_MONTH_TOO_SMALL:"Month cannot be 0",E_YEAR_NAN:"Year must be a number",E_YEAR_LENGTH:"Year must be 4 digits",E_YEAR_TOO_SMALL:"Year must not be before %y",E_MIN_DATE:"Date must be after %DATE",E_MAX_DATE:"Date must not be in the future"};class s{constructor(e,o){i=s.getYmd(new Date),this.input_day=0,this.input_month=0,this.input_year=0,this.$element=e,o&&t.extend(r,o),this.init()}static getYmd(t){const e=t.getMonth()+1,i=t.getDay();return t.getFullYear()+"-"+(e<10?"0":"")+e+"-"+(i<10?"0":"")+i}static getYmdObject(t){return t.year+"-"+t.month+"-"+t.day}addEntryFields(){let e=this;e.fields=[],t.each(r.field_order.split(""),(function(t,i){switch(i){case"D":e.buildField("day",t);break;case"M":e.buildField("month",t);break;case"Y":e.buildField("year",t);break;default:throw"Unexpected field order '"+i+"' expected D, M or Y"}}))}afterPaste(e){this.parseDate(t(e).val())&&this.setDate(t(e).val())}buildField(e,i){let o=new n({name:e,krdobentry:this,index:i,hint_text:r.show_hints?r["field_hint_text_"+e]:null});this.inner.append(o.$input),this["input_"+e]=o,i<2&&this.inner.append(t('<span class="separator" />').text(r.separator)),this.fields[i]=o,this[e]=o}buildUi(){let e=this;this.wrapper=t(this.$element.wrap('<span class="jq-dte" />').parent()[0]),this.inner=t('<span class="jq-dte-inner" />'),this.addEntryFields(),this.errorbox=t('<span class="jq-dte-errorbox" />').hide(),this.inner.on("paste","input",(function(t){let i=this;setTimeout((function(){e.afterPaste(i,t)}),2)})),this.wrapper.append(this.inner,this.errorbox),this.setFieldWidths(),this.$element.hide()}checkDocument(t,e,i){let o=document.getElementsByClassName(i);for(let i=0;i<o.length;i++)new Date(t)>new Date(e)?o[i].style.display="none":o[i].style.display="block"}clear(){this.clearError(""),this.setDate("")}clearError(){delete this.error_text,this.showError()}destroy(){this.$element.show(),this.$element.css("display",""),this.wrapper.find("span").remove(),this.$element.unwrap(),this.$element.removeData("datetextentry"),delete this.inner,delete this.wrapper,delete this.$element}focus(){this.fields[0].setFocus(!0)}focusFieldBefore(t){const e=t.index;e<1||(this.fields[e].yieldFocus(),this.fields[e-1].setFocus(!0))}focusFieldAfter(t){const e=t.index;e>1||(this.fields[e].yieldFocus(),this.fields[e+1].setFocus(!0))}focusIn(){this.wrapper.addClass("focus")}focusOut(){r.on_blur&&setTimeout((function(){self.widgetFocusLost()}),2),this.wrapper.removeClass("focus")}getDate(){return this.day_value&&this.month_value&&this.year_value?{day:this.day_value,month:this.month_value,year:this.year_value}:null}init(){r.max_date||(r.max_date=i),r.min_year||(r.min_year="1910"),this.buildUi(),this.setDate(this.$element.attr("value")),this.proxyLabelClicks()}parseDate(t){return this.parseIsoDate(t)}parseIsoDate(t){return t&&t.match(/^(\d\d\d\d)-(\d\d)-(\d\d)/)?{day:RegExp.$3,month:RegExp.$2,year:RegExp.$1}:null}proxyLabelClicks(){let e=this,i=this.$element.attr("id");i&&t("label[for="+i+"]").click((function(){e.focus()}))}setDate(e){let i=this;e=this.parseDate(e),delete this.day_value,delete this.month_value,delete this.year_value,this.input_day.set(e?e.day:""),this.input_month.set(e?e.month:""),this.input_year.set(e?e.year:""),this.clearError(),this.$element.val(e),e&&t.each(this.fields,(function(t,e){i.validate(e)}))}setError(t){this.error_text=t,this.showError()}setFieldWidths(){let t=this.$element.width()-2,e=r.field_width_year+r.field_width_sep+r.field_width_month+r.field_width_sep+r.field_width_day;this.input_day.setWidth(Math.floor(r.field_width_day*t/e)),this.input_month.setWidth(Math.floor(r.field_width_month*t/e)),this.input_year.setWidth(Math.floor(r.field_width_year*t/e))}setReadonly(t){void 0===t&&(t=!0),this.input_day.setReadonly(t),this.input_month.setReadonly(t),this.input_year.setReadonly(t),t?this.wrapper.addClass("readonly"):this.wrapper.removeClass("readonly")}showError(){let t=this.widgetErrorText();if(this.on_error&&this.on_error(t),r.show_errors)if(""===t)this.errorbox.hide(),this.errorbox.text("");else{let e=this.inner.outerWidth()+r.errorbox_x+"px",i=r.errorbox_y+"px";this.errorbox.css({display:"block",position:"absolute",top:i,left:e}),this.errorbox.text(t),this.errorbox.show()}}validate(t){if(this.$element.val(""),t){const e=t.name;try{"day"===e?this.validateDay():"month"===e?this.validateMonth():"year"===e&&this.validateYear(),t.clearError()}catch(e){return t.setError(e),!1}}if(this.day_value&&this.month_value){this.clearError();try{if(this.validateDaysInMonth(),this.year_value&&4===this.year_value.length){this.validateCompleteDate();let t=s.getYmdObject(this.getDate());this.$element.val(t),this.$element.data("childdob")&&this.checkDocument(t,this.$element.data("childdob"),this.$element.attr("id"))}}catch(t){return this.setError(t),!1}}else this.clearError();return!0}validateCompleteDate(){const t=this.getDate(),e=s.getYmdObject(t);let i=r.max_date;if("function"==typeof i&&(i=i.call(this)),"string"==typeof i&&(i=this.parseDate(i)),i&&e>r.max_date)throw r.E_MAX_DATE;this.custom_validation&&(t.date=new Date(parseInt(t.year,10),parseInt(t.month,10)-1,parseInt(t.day,10)),this.custom_validation(t))}validateDay(){let t=r,e=this.input_day;this.day_value=void 0;let i=e.get();if(""===i||"0"===i&&e.has_focus)return;if(i.match(/\D/))throw t.E_DAY_NAN;let o=parseInt(i,10);if(o<1)throw t.E_DAY_TOO_SMALL;if(o>31)throw t.E_DAY_TOO_BIG;i=o<10?"0"+o:""+o,e.has_focus||e.set(i),this.day_value=i}validateDaysInMonth(){const t=parseInt(this.day_value,10),e=parseInt(this.month_value,10),i=parseInt(this.year_value,10);if(t<1||e<1)return;let o=r.days_in_month[e-1],s=r.E_BAD_DAY_FOR_MONTH;if(2===e&&4===(""+i).length?(o=i%4?28:i%100?29:i%400?28:29,s=s.replace(/%y/,i.toString())):s=s.replace(/ *%y/,""),t>o)throw s.replace(/%d/,o.toString()).replace(/%m/,r.month_name[e-1])}validateMonth(){let t=this.input_month;this.month_value=void 0;let e=t.get();if(""===e||"0"===e&&t.has_focus)return;if(e.match(/\D/))throw r.E_MONTH_NAN;let i=parseInt(e,10);if(i<1)throw r.E_MONTH_TOO_SMALL;if(i>12)throw r.E_MONTH_TOO_BIG;e=i<10?"0"+i:""+i,t.has_focus||t.set(e),this.month_value=e}validateYear(){const t=this.input_year;this.year_value=void 0;let e=t.get();if(!(""===e||"0"===e&&t.has_focus)){if(e.match(/\D/))throw r.E_YEAR_NAN;if(t.has_focus){if(e.length>4)throw r.E_YEAR_LENGTH}else if(4!==e.length)throw r.E_YEAR_LENGTH;if(4===e.length){const t=parseInt(e,10);if(r.min_year&&t<r.min_year)throw r.E_YEAR_TOO_SMALL.replace(/%y/,r.min_year)}this.year_value=e}}widgetErrorText(){let e="";return t.each(this.fields,(function(t,i){i.error_text&&(i.has_focus||""===e)&&(e=i.error_text)})),""===e&&this.error_text&&(e=this.error_text),e}widgetFocusLost(){r.on_blur&&!this.wrapper.is(".focus")&&r.onBlur()}}class n{constructor(e){const i=this;this.dobfield=e.krdobentry,this.name=e.name,this.index=e.index,this.hint_text=e.hint_text,this.has_focus=!1,this.empty=!0,this.$input=t('<input type="text" value="" />').addClass("jq-dte-"+this.name).attr("aria-label"," ("+this.hint_text+")").focus(t.proxy(i,"focus")).blur(t.proxy(i,"blur")).keydown((function(t){setTimeout((function(){i.keydown(t)}),2)})).keyup((function(t){setTimeout((function(){i.keyup(t)}),2)}))}blur(){this.has_focus=!1,this.dobfield.focusOut(),this.show_hint(),this.dobfield.validate(this)}clearError(){delete this.error_text,this.$input.removeClass("error")}focus(){this.key_is_down=!1,this.$input.prop("readonly")||(this.has_focus=!0,this.dobfield.focusIn(),this.$input.hasClass("hint")&&this.$input.val("").removeClass("hint"),this.dobfield.showError())}get(){let t=this.$input.val();return t===this.hint_text?"":t}isDigitKey(t){let e=t.which;return e>=48&&e<=57||e>=96&&e<=105}keydown(){this.key_is_down=!0}keyup(t){if(!this.key_is_down)return;if(t.which===o&&this.empty)return this.dobfield.focusFieldBefore(this);let e=this.get();if(this.empty=""===e,e.match(/[\/\\. -]/)&&(e=e.replace(/[\/\\. -]/,""),this.set(e),!this.empty&&this.index<2&&this.dobfield.focusFieldAfter(this)),this.dobfield.validate(this)){let i="year"===this.name?4:2;this.isDigitKey(t)&&e.length===i&&this.dobfield.focusFieldAfter(this)}}left(){return this.$input.position().left}set(t){return this.$input.val(t).removeClass("hint"),this.has_focus||this.show_hint(),this.empty=""===t,this.clearError(),this}setError(t){this.error_text=t,this.$input.addClass("error"),this.dobfield.showError()}setFocus(t){let e=this.$input;return e.focus(),t?e.select():e.val(e.val()),this}setWidth(t){return this.$input.width(t),this}show_hint(){return""===this.get()&&"string"==typeof this.hint_text&&this.$input.val(this.hint_text).addClass("hint"),this}yieldFocus(){this.$input.blur()}}t(document).ready((function(){t(".dobissue").each((function(){e=new s(t(this),{})}))}))}(o)},668:(t,e,i)=>{"use strict";!function(t){function e(e,o){let r,s=t("#jform_adults").val(),n=t("#jform_child"),a=n.val(),l=o-s,h=t("#holder");if(1===e){if(n.attr("max",l),a>l)if(n.val(l),l)for(r=0;r<a-l;r++)h.children().last().remove();else h.hide()}else if(2===e){let t,e=h.children("input").length;if(a>e)for(t=a-e,r=1;r<=t;r++)h.append(i(e+r));else for(t=e-a,r=0;r<t;r++)h.children("input").last().remove();let o=h.children("input").length;o?h.show():o||h.hide()}}function i(e){const i=t("#jsdata"),o=i.data("childminage"),r=i.data("childmaxage");let s=document.createElement("input");return s.setAttribute("type","number"),s.setAttribute("min",o),s.setAttribute("max",r),s.setAttribute("value","2"),s.setAttribute("step","1"),s.setAttribute("name","jform[child_ages][]"),s.setAttribute("id","jform_child_ages_"+e),s.setAttribute("class","float-left child-ages input-tiny form-control valid form-control-success"),s}function o(t){let e=document.getElementsByClassName("amitem");for(let t=0;t<e.length;t++)e[t].classList.remove("active");document.getElementById("air-data").style.display="none",document.getElementById("train-data").style.display="none",document.getElementById("auto-data").style.display="none",document.getElementById("other-data").style.display="none";let i=t+"-data";document.getElementById(i).style.display="block",document.getElementById(t).classList.add("active"),document.getElementById("jform_arrival_means").value=t}t((function(){const i=t("#jsdata").data("totalguests");if(t("#jform_adults").on("change",(function(){e(1,i)})),t("#jform_child").on("change",(function(){e(2,i)})),document.getElementById("howtoarrive")){let t=document.getElementById("howtoarrive").getAttribute("data-means");t||(t="air"),o(t)}t("body").on("click",".amitem",(function(e){e.preventDefault(),o(t(this).attr("id"))}))}))}(i(634))},549:(t,e,i)=>{"use strict";var o=i(634);window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.host);const r=window.location.origin+"/",s="en";!function(t){const e={type:"poly",coords:[1,1,1,32,37,32,32,1]};let i,n,a,l,h,d,c,p,u,m=!1,g={propertyMarkers:[],filterIds:[],mapMarkers:[],mapTypeId:"",mapZoom:0,mapMaxZoom:20,mapType:"",mapId:"",markerColor:"red"};class f{constructor(t){this.settings=t,this.gmOptions={scrollwheel:!1,zoom:this.settings.mapZoom,maxZoom:this.settings.mapMaxZoom,mapTypeId:this.settings.mapTypeId,streetViewControl:!1},a=this.settings.mapZoom,this.gmarkers=[],this.count=0,this.initMap()}static closeKrInfowindow(){t("#kr-infowindow").hide(),l.close(),h.close()}static showVisibleMarkers(t){let e=n.getBounds(),i=0;for(let o=0;o<t.length;o++){let r=t[o];"map"===r.type&&(!0===e.contains(r.getPosition())?(r.setVisible(!0),i++):r.setVisible(!1))}return i}checkDuplicate(t){if(this.gmarkers.length>0){let e=0;for(let i=0;i<this.gmarkers.length;i++){let o=this.gmarkers[i].getPosition();if(t.equals(o)){e++;let i=360/e,r=o.lat()+-2e-5*Math.cos(+i*e/180*Math.PI),s=o.lng()+-0*Math.sin(+i*e/180*Math.PI);t=new google.maps.LatLng(r,s)}}}return t}checkZoom(){if(a>0){let t=n.addListener("idle",(function(){const e=n.getZoom();a>0&&e!==a&&(n.setZoom(a),t.remove())}))}}clusterMap(){const e={gridSize:20,maxZoom:this.settings.mapMaxZoom-1,imagePath:"/media/com_knowres/images/markerclusterer/m",ignoreHiddenMarkers:!0};this.setPropertyMarkers(),this.setMapMarkers();for(let t=0;t<this.gmarkers.length;t++){let e=this.gmarkers[t];"property"===e.type&&(this.settings.filterIds.includes(e.pid)?e.setVisible(!0):e.setVisible(!1))}u=new MarkerClusterer(n,this.gmarkers,e),google.maps.event.addListener(u,"clusterclick",(function(){t("#kr-infowindow").hide(),l.close()})),n.fitBounds(d),this.checkZoom()}createMap(){n=new google.maps.Map(document.getElementById(this.settings.mapId),this.gmOptions),l=new google.maps.InfoWindow,h=new google.maps.InfoWindow,d=new google.maps.LatLngBounds}createMapMarker(t,i,o,r,s,a){let l=new google.maps.Marker({shape:e,link:s,icon:o,position:t,title:a,map:n,zIndex:999});google.maps.event.addListener(l,"mouseover",function(t){return function(){h.setContent(t),h.open(n,l)}}(i)),google.maps.event.addListener(l,"mouseout",(function(){h.close()})),google.maps.event.addListener(l,"closeclick",(function(){h.close()})),this.gmarkers.push(l),this.count++}createPropertyMarker(e,i,o,a,h,p,u,m,g){let f=new google.maps.Marker({position:e,link:a,map:n,icon:m,title:h,pid:g,type:"property",zIndex:this.count+1e3});c=document.getElementById(u),f.addListener("mousedown",function(e){return function(){l.close(),t("#kr-infowindow").hide(),l.setContent(i),l.open(n,f),t.ajax({type:"POST",url:r+"index.php?option=com_knowres&task=property.mapinfowindow&lang="+s,data:{id:parseInt(e)},success:function(e){t("#kr-infowindow").fadeIn(400).html(e).show(),t(".kr-infowindow-slideshow").not(".slick-initialized").slick({nextArrow:'<i class="slick-nav next fas fa-chevron-right "></i>',prevArrow:'<i class="slick-nav prev fas fa-chevron-left "></i>',autoplay:!0})}})}}(o)),google.maps.event.addListener(f,"closeclick",(function(){t("#kr-infowindow").hide(),l.close()})),this.gmarkers.push(f),d.extend(e),this.count++}initMap(){this.createMap(),"cluster"===this.settings.mapType?this.clusterMap():this.soloMap()}refreshMap(t){if("solo"===this.settings.mapType)return;let e=this;o.ajax({url:r+"index.php?option=com_knowres&task=properties.refreshmap&lang="+s,type:"POST",dataType:"json",success:function(i){if(i.success){e.settings.filterIds=i.data.filterIds;for(let t=0;t<e.gmarkers.length;t++){let i=e.gmarkers[t];"property"===i.type&&(e.settings.filterIds.includes(i.pid)?i.setVisible(!0):i.setVisible(!1))}u.repaint(),new Foundation.Reveal(t),t.foundation("open"),google.maps.event.trigger(n,"resize"),t.foundation("open")}else alert(i.message)}})}resetMap(){l.close(),h.close(),t("#kr-infowindow").hide(),n.fitBounds(d),this.checkZoom()}setMapMarkers(){let t,e;for(let i=0;i<this.settings.mapMarkers.length;i++){e=this.settings.mapMarkers[i];let o={url:e.icon,size:new google.maps.Size(32,37),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,18)};t=new google.maps.LatLng(e.lat,e.lng),t=this.checkDuplicate(t),this.createMapMarker(t,e.html,o,"","",e.title)}}setPropertyMarkers(){let t,e;for(let i=0;i<this.settings.propertyMarkers.length;i++)e=this.settings.propertyMarkers[i],i||(p={url:e.icon,size:new google.maps.Size(32,37),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,20)}),t=new google.maps.LatLng(e.lat,e.lng),t=this.checkDuplicate(t),this.createPropertyMarker(t,e.html,e.boxinfo,e.link,e.title,e.color,e.id,p,e.pid)}soloMap(){if(this.setPropertyMarkers(),this.setMapMarkers(),n.fitBounds(d),this.checkZoom(),this.settings.mapMarkers.length>0){const t=this;let e=google.maps.event.addListener(n,"idle",(function(){let i=0,o=n.getZoom();for(;!i;){if(i=f.showVisibleMarkers(t.gmarkers),i){e.remove(),n.setZoom(o);break}if(o-=1,o<10)break}}))}}}t((function(){let e;if(t("body").on("click",".map-trigger",(function(o){o.preventDefault(),m?i.refreshMap(e):(l(t(this)),e=t("#kr-search-map-modal"),new Foundation.Reveal(e),e.foundation("open"))})).on("click",".resetmap",(function(t){t.preventDefault(),i.resetMap()})).on("click","#kr-search-map-full-infowindow-close",(function(t){t.preventDefault(),f.closeKrInfowindow()})).on("click",".closemap",(function(i){i.preventDefault(),e.foundation("close"),t.ajax({type:"POST",url:r+"index.php?option=com_knowres&task=properties.mapsession&lang="+s,success:function(){return!0}})})).on("open.zf.reveal","#kr-search-map-modal",(function(e){e.preventDefault(),t("#kr-search-map-full").height(t("#kr-search-map-modal").height()),google.maps.event.trigger(n,"resize"),t.ajax({type:"POST",url:r+"index.php?option=com_knowres&task=properties.mapsession&lang="+s,data:{map_modal:"1"},success:function(){return!0}})})),!m){const e=t("#kr-map-solo-trigger");e.one("click",(function(){l(e)})),-1!==window.location.href.indexOf("#map")&&e.length&&l(e)}const a=t(".map-trigger");function l(t){let e=0;"solo"===t.data("type")&&(e=t.data("pid")),o.ajax({url:r+"index.php?option=com_knowres&task=properties.mapdata&pid="+e+"&lang="+s,type:"POST",dataType:"json",success:function(e){e.success?(g={mapId:t.data("target"),mapType:t.data("type"),mapTypeId:t.data("maptypeid"),mapZoom:parseInt(t.data("zoom")),mapMaxZoom:parseInt(t.data("zoommax")),propertyMarkers:e.data.propertyMarkers,mapMarkers:e.data.mapMarkers,filterIds:e.data.filterIds},i=new f(g),m=!0):alert(e.message)}})}a.data("forcemap")&&a.trigger("click")}))}(o)},605:(t,e,i)=>{"use strict";var o=i(634);!function(t){let e,i,r,s,n,a,l,h=!1,d=[],c=[],p={lat:"",lng:"",name:"",icon:"",detour:"",mapZoom:9,mapMaxZoom:20,mapTypeId:"roadmap",mapId:"kr-map-route",directionsPanel:"kr-directions-panel",directionsService:null};class u{constructor(e,i){this.settings=p,i&&t.extend(this.settings,i),this.settings.directionsService=new google.maps.DirectionsService,this.init()}static clearRouteMarkers(){for(let t=0;t<d.length;t++)d[t].setMap(null)}static clearWaypoints(){s=null,d=[],c=[],h=!1}addRouteMarker(t){d.push(new google.maps.Marker({position:t,map:r,icon:this.settings.detour}))}calcRoute(){let t,e=document.getElementById("from_address").value,o="";switch("Address"===e&&(e=""),e&&(o=e+","),document.getElementById("mode").value){case"bicycling":t=google.maps.DirectionsTravelMode.BICYCLING;break;case"driving":t=google.maps.DirectionsTravelMode.DRIVING;break;case"walking":t=google.maps.DirectionsTravelMode.WALKING}if(o){let e={origin:o,destination:n,waypoints:c,travelMode:t,avoidHighways:document.getElementById("highways").checked,avoidTolls:document.getElementById("tolls").checked};l=this,this.settings.directionsService.route(e,(function(t,e){e===google.maps.DirectionsStatus.OK?i.setDirections(t):(alert("Google couldn`t calculate directions for this route and selected options"),l.resetRoute())}))}u.clearRouteMarkers(),h=!0}init(){n=new google.maps.LatLng(this.settings.lat,this.settings.lng),this.myOptions={scrollwheel:!1,zoom:this.settings.mapZoom,maxZoom:this.settings.mapMaxZoom,mapTypeId:this.settings.mapTypeId,streetViewControl:!1,center:n},r=new google.maps.Map(document.getElementById(this.settings.mapId),this.myOptions),i=new google.maps.DirectionsRenderer,i.setMap(r),i.setPanel(document.getElementById(this.settings.directionsPanel));new google.maps.MarkerImage(this.settings.icon);a=new google.maps.LatLng(this.settings.lat,this.settings.lng),l=this,google.maps.event.addListener(r,"click",(function(t){c.length<9?(c.push({location:t.latLng,stopover:!0}),a=t.latLng,l.addRouteMarker(a)):alert("Maximum number of 9 waypoints reached")})),l=this,google.maps.event.addListenerOnce(r,"idle",(function(){google.maps.event.trigger(r,"resize"),l.calcRoute()}))}resetRoute(){u.clearRouteMarkers(),u.clearWaypoints(),i.setMap(null),i.setPanel(null),i=new google.maps.DirectionsRenderer,i.setMap(r),i.setPanel(document.getElementById(this.settings.directionPanel)),this.init()}}t(document).ready((function(){t(".kr-directions-modal").on("click","#kr-map-route",(function(i){let o=t(this);const r={lat:o.data("lat"),lng:o.data("lng"),name:o.data("name"),icon:o.data("icon"),detour:o.data("detour")};e=new u(o,r)})).on("click",".resetroute",(function(t){t.preventDefault(),e.resetRoute()})).on("click",".calcroute",(function(t){t.preventDefault(),e.calcRoute()})),o("a#geocodeAddress").on("click",(function(t){t.preventDefault();let e=o("#jform_property_street").val()+", "+o("#jform_town_id").find(":selected").text()+" "+o("#jform_property_postcode").val()+", "+o("#jform_region_id").find(":selected").text()+" "+o("#jform_country_id").find(":selected").text(),i=[];o.ajax({type:"POST",url:"index.php?option=com_knowres&task=property.geocode",data:{address:e},dataType:"json",success:function(t){o.each(t,(function(t,e){o("#"+t).val(e),i[t]=e,myGmap.refreshMap(i.lat,i.lng,!1)}))}})}))}))}(o)},400:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t,e,i){this.extend(r,google.maps.OverlayView),this.map_=t,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var o=i||{};this.gridSize_=o.gridSize||60,this.minClusterSize_=o.minimumClusterSize||2,this.maxZoom_=o.maxZoom||null,this.styles_=o.styles||[],this.imagePath_=o.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=o.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,null!=o.zoomOnClick&&(this.zoomOnClick_=o.zoomOnClick),this.averageCenter_=!1,null!=o.averageCenter&&(this.averageCenter_=o.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var s=this;google.maps.event.addListener(this.map_,"zoom_changed",(function(){var t=s.map_.getZoom();s.prevZoom_!=t&&(s.prevZoom_=t,s.resetViewport())})),google.maps.event.addListener(this.map_,"idle",(function(){s.redraw()})),e&&e.length&&this.addMarkers(e,!1)}function s(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new n(this,t.getStyles(),t.getGridSize())}function n(t,e,i){t.getMarkerClusterer().extend(n,google.maps.OverlayView),this.styles_=e,this.padding_=i||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}r.prototype.MARKER_CLUSTER_IMAGE_PATH_="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m",r.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",r.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},r.prototype.onAdd=function(){this.setReady_(!0)},r.prototype.draw=function(){},r.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},r.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),i=new google.maps.LatLngBounds,o=0;t=e[o];o++)i.extend(t.getPosition());this.map_.fitBounds(i)},r.prototype.setStyles=function(t){this.styles_=t},r.prototype.getStyles=function(){return this.styles_},r.prototype.isZoomOnClick=function(){return this.zoomOnClick_},r.prototype.isAverageCenter=function(){return this.averageCenter_},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getTotalMarkers=function(){return this.markers_.length},r.prototype.setMaxZoom=function(t){this.maxZoom_=t},r.prototype.getMaxZoom=function(){return this.maxZoom_},r.prototype.calculator_=function(t,e){for(var i=0,o=t.length,r=o;0!==r;)r=parseInt(r/10,10),i++;return{text:o,index:i=Math.min(i,e)}},r.prototype.setCalculator=function(t){this.calculator_=t},r.prototype.getCalculator=function(){return this.calculator_},r.prototype.addMarkers=function(t,e){for(var i,o=0;i=t[o];o++)this.pushMarkerTo_(i);e||this.redraw()},r.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",(function(){t.isAdded=!1,e.repaint()}))}this.markers_.push(t)},r.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},r.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var i,o=0;i=this.markers_[o];o++)if(i==t){e=o;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},r.prototype.removeMarker=function(t,e){var i=this.removeMarker_(t);return!(e||!i)&&(this.resetViewport(),this.redraw(),!0)},r.prototype.removeMarkers=function(t,e){for(var i,o=!1,r=0;i=t[r];r++){var s=this.removeMarker_(i);o=o||s}if(!e&&o)return this.resetViewport(),this.redraw(),!0},r.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},r.prototype.getTotalClusters=function(){return this.clusters_.length},r.prototype.getMap=function(){return this.map_},r.prototype.setMap=function(t){this.map_=t},r.prototype.getGridSize=function(){return this.gridSize_},r.prototype.setGridSize=function(t){this.gridSize_=t},r.prototype.getMinClusterSize=function(){return this.minClusterSize_},r.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},r.prototype.getExtendedBounds=function(t){var e=this.getProjection(),i=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),o=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),r=e.fromLatLngToDivPixel(i);r.x+=this.gridSize_,r.y-=this.gridSize_;var s=e.fromLatLngToDivPixel(o);s.x-=this.gridSize_,s.y+=this.gridSize_;var n=e.fromDivPixelToLatLng(r),a=e.fromDivPixelToLatLng(s);return t.extend(n),t.extend(a),t},r.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},r.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},r.prototype.resetViewport=function(t){for(var e,i=0;e=this.clusters_[i];i++)e.remove();var o;for(i=0;o=this.markers_[i];i++)o.isAdded=!1,t&&o.setMap(null);this.clusters_=[]},r.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout((function(){for(var e,i=0;e=t[i];i++)e.remove()}),0)},r.prototype.redraw=function(){this.createClusters_()},r.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var i=(e.lat()-t.lat())*Math.PI/180,o=(e.lng()-t.lng())*Math.PI/180,r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))},r.prototype.addToClosestCluster_=function(t){for(var e,i=4e4,o=null,r=(t.getPosition(),0);e=this.clusters_[r];r++){var n=e.getCenter();if(n){var a=this.distanceBetweenPoints_(n,t.getPosition());a<i&&(i=a,o=e)}}o&&o.isMarkerInClusterBounds(t)?o.addMarker(t):((e=new s(this)).addMarker(t),this.clusters_.push(e))},r.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),i=this.getExtendedBounds(e),o=0;t=this.markers_[o];o++)!t.isAdded&&this.isMarkerInBounds_(t,i)&&this.addToClosestCluster_(t)},s.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,i=0;e=this.markers_[i];i++)if(e==t)return!0;return!1},s.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,i=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,o=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(i,o),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var r=this.markers_.length;if(r<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),r==this.minClusterSize_)for(var s=0;s<r;s++)this.markers_[s].setMap(null);return r>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),!0},s.prototype.getMarkerClusterer=function(){return this.markerClusterer_},s.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),i=this.getMarkers(),o=0;t=i[o];o++)e.extend(t.getPosition());return e},s.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},s.prototype.getSize=function(){return this.markers_.length},s.prototype.getMarkers=function(){return this.markers_},s.prototype.getCenter=function(){return this.center_},s.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},s.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},s.prototype.getMap=function(){return this.map_},s.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var i,o=0;i=this.markers_[o];o++)i.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var r=this.markerClusterer_.getStyles().length,s=this.markerClusterer_.getCalculator()(this.markers_,r);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(s),this.clusterIcon_.show()}},n.prototype.triggerClusterClick=function(){var t=this.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"clusterclick",this.cluster_),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},n.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this;google.maps.event.addDomListener(this.div_,"click",(function(){e.triggerClusterClick()}))},n.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10),e},n.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},n.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},n.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},n.prototype.remove=function(){this.setMap(null)},n.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},n.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},n.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.fontFamily_=e.fontFamily,this.fontWeight_=e.fontWeight,this.backgroundPosition_=e.backgroundPosition},n.prototype.setCenter=function(t){this.center_=t},n.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var i=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+i+";"),"object"===o(this.anchor_)?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var r=this.textColor_?this.textColor_:"black",s=this.textSize_?this.textSize_:11,n=this.fontFamily_?this.fontFamily_:"Arial,sans-serif",a=this.fontWeight_?this.fontWeight_:"400";return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+r+"; position:absolute; font-size:"+s+"px; font-family:"+n+"; font-weight:"+a+";"),e.join("")},i.g.MarkerClusterer=r,r.prototype.addMarker=r.prototype.addMarker,r.prototype.addMarkers=r.prototype.addMarkers,r.prototype.clearMarkers=r.prototype.clearMarkers,r.prototype.fitMapToMarkers=r.prototype.fitMapToMarkers,r.prototype.getCalculator=r.prototype.getCalculator,r.prototype.getGridSize=r.prototype.getGridSize,r.prototype.getExtendedBounds=r.prototype.getExtendedBounds,r.prototype.getMap=r.prototype.getMap,r.prototype.getMarkers=r.prototype.getMarkers,r.prototype.getMaxZoom=r.prototype.getMaxZoom,r.prototype.getStyles=r.prototype.getStyles,r.prototype.getTotalClusters=r.prototype.getTotalClusters,r.prototype.getTotalMarkers=r.prototype.getTotalMarkers,r.prototype.redraw=r.prototype.redraw,r.prototype.removeMarker=r.prototype.removeMarker,r.prototype.removeMarkers=r.prototype.removeMarkers,r.prototype.resetViewport=r.prototype.resetViewport,r.prototype.repaint=r.prototype.repaint,r.prototype.setCalculator=r.prototype.setCalculator,r.prototype.setGridSize=r.prototype.setGridSize,r.prototype.setMaxZoom=r.prototype.setMaxZoom,r.prototype.onAdd=r.prototype.onAdd,r.prototype.draw=r.prototype.draw,s.prototype.getCenter=s.prototype.getCenter,s.prototype.getSize=s.prototype.getSize,s.prototype.getMarkers=s.prototype.getMarkers,n.prototype.onAdd=n.prototype.onAdd,n.prototype.draw=n.prototype.draw,n.prototype.onRemove=n.prototype.onRemove,t.exports=r},943:(t,e,i)=>{var o,r,s;function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}r=[i(634)],void 0===(s="function"==typeof(o=function(t){var e=function(){function e(){var e=this,i=function(){var i=["br-wrapper"];""!==e.options.theme&&i.push("br-theme-"+e.options.theme),e.$elem.wrap(t("<div />",{class:i.join(" ")}))},o=function(){e.$elem.unwrap()},r=function(i){return t.isNumeric(i)&&(i=Math.floor(i)),t('option[value="'+i+'"]',e.$elem)},s=function(){var i=e.options.initialRating;return i?r(i):t("option:selected",e.$elem)},a=function(){var i=e.$elem.find('option[value="'+e.options.emptyValue+'"]');return!i.length&&e.options.allowEmpty?(i=t("<option />",{value:e.options.emptyValue})).prependTo(e.$elem):i},l=function(t){var i=e.$elem.data("barrating");return void 0!==t?i[t]:i},h=function(t,i){null!==i&&"object"===n(i)?e.$elem.data("barrating",i):e.$elem.data("barrating")[t]=i},d=function(){var t=s(),i=a(),o=t.val(),r=t.data("html")?t.data("html"):t.text(),n=null!==e.options.allowEmpty?e.options.allowEmpty:!!i.length,l=i.length?i.val():null,d=i.length?i.text():null;h(null,{userOptions:e.options,ratingValue:o,ratingText:r,originalRatingValue:o,originalRatingText:r,allowEmpty:n,emptyRatingValue:l,emptyRatingText:d,readOnly:e.options.readonly,ratingMade:!1})},c=function(){e.$elem.removeData("barrating")},p=function(){return l("ratingText")},u=function(){return l("ratingValue")},m=function(){var i=t("<div />",{class:"br-widget"});return e.$elem.find("option").each((function(){var o,r,s,n;(o=t(this).val())!==l("emptyRatingValue")&&(r=t(this).text(),(s=t(this).data("html"))&&(r=s),n=t("<a />",{href:"#","data-rating-value":o,"data-rating-text":r,html:e.options.showValues?r:""}),i.append(n))})),e.options.showSelectedRating&&i.append(t("<div />",{text:"",class:"br-current-rating"})),e.options.reverse&&i.addClass("br-reverse"),e.options.readonly&&i.addClass("br-readonly"),i},g=function(){return l("userOptions").reverse?"nextAll":"prevAll"},f=function(t){r(t).prop("selected",!0),e.$elem.change()},y=function(){t("option",e.$elem).prop("selected",(function(){return this.defaultSelected})),e.$elem.change()},_=function(t){(t=t||p())==l("emptyRatingText")&&(t=""),e.options.showSelectedRating&&e.$elem.parent().find(".br-current-rating").text(t)},v=function(t){return Math.round(Math.floor(10*t)/10%1*100)},w=function(){e.$widget.find("a").removeClass((function(t,e){return(e.match(/(^|\s)br-\S+/g)||[]).join(" ")}))},k=function(){var i,o,r=e.$widget.find('a[data-rating-value="'+u()+'"]'),s=l("userOptions").initialRating,n=t.isNumeric(u())?u():0,a=v(s);if(w(),r.addClass("br-selected br-current")[g()]().addClass("br-selected"),!l("ratingMade")&&t.isNumeric(s)){if(s<=n||!a)return;i=e.$widget.find("a"),(o=r.length?r[l("userOptions").reverse?"prev":"next"]():i[l("userOptions").reverse?"last":"first"]()).addClass("br-fractional"),o.addClass("br-fractional-"+a)}},x=function(t){return!(!l("allowEmpty")||!l("userOptions").deselectable)&&u()==t.attr("data-rating-value")},M=function(i){i.on("click.barrating",(function(i){var o,r,s=t(this),n=l("userOptions");return i.preventDefault(),o=s.attr("data-rating-value"),r=s.attr("data-rating-text"),x(s)&&(o=l("emptyRatingValue"),r=l("emptyRatingText")),h("ratingValue",o),h("ratingText",r),h("ratingMade",!0),f(o),_(r),k(),n.onSelect.call(e,u(),p(),i),!1}))},b=function(e){e.on("mouseenter.barrating",(function(){var e=t(this);w(),e.addClass("br-active")[g()]().addClass("br-active"),_(e.attr("data-rating-text"))}))},E=function(t){e.$widget.on("mouseleave.barrating blur.barrating",(function(){_(),k()}))},C=function(e){e.on("touchstart.barrating",(function(e){e.preventDefault(),e.stopPropagation(),t(this).click()}))},S=function(t){t.on("click.barrating",(function(t){t.preventDefault()}))},T=function(t){M(t),e.options.hoverState&&(b(t),E(t))},D=function(t){t.off(".barrating")},I=function(t){var i=e.$widget.find("a");C&&C(i),t?(D(i),S(i)):T(i)};this.show=function(){l()||(i(),d(),e.$widget=m(),e.$widget.insertAfter(e.$elem),k(),_(),I(e.options.readonly),e.$elem.hide())},this.readonly=function(t){"boolean"==typeof t&&l("readOnly")!=t&&(I(t),h("readOnly",t),e.$widget.toggleClass("br-readonly"))},this.set=function(t){var i=l("userOptions");0!==e.$elem.find('option[value="'+t+'"]').length&&(h("ratingValue",t),h("ratingText",e.$elem.find('option[value="'+t+'"]').text()),h("ratingMade",!0),f(u()),_(p()),k(),i.silent||i.onSelect.call(this,u(),p()))},this.clear=function(){var t=l("userOptions");h("ratingValue",l("originalRatingValue")),h("ratingText",l("originalRatingText")),h("ratingMade",!1),y(),_(p()),k(),t.onClear.call(this,u(),p())},this.destroy=function(){var t=u(),i=p(),r=l("userOptions");D(e.$widget.find("a")),e.$widget.remove(),c(),o(),e.$elem.show(),r.onDestroy.call(this,t,i)}}return e.prototype.init=function(e,i){return this.$elem=t(i),this.options=t.extend({},t.fn.barrating.defaults,e),this.options},e}();t.fn.barrating=function(i,o){return this.each((function(){var r=new e;if(t(this).is("select")||t.error("Sorry, this plugin only works with select fields."),r.hasOwnProperty(i)){if(r.init(o,this),"show"===i)return r.show(o);if(r.$elem.data("barrating"))return r.$widget=t(this).next(".br-widget"),r[i](o)}else{if("object"===n(i)||!i)return o=i,r.init(o,this),r.show();t.error("Method "+i+" does not exist on jQuery.barrating")}}))},t.fn.barrating.defaults={theme:"",initialRating:null,allowEmpty:null,emptyValue:"",showValues:!1,showSelectedRating:!0,deselectable:!0,reverse:!1,readonly:!1,fastClicks:!0,hoverState:!0,silent:!1,onSelect:function(t,e,i){},onClear:function(t,e){},onDestroy:function(t,e){}},t.fn.barrating.BarRating=e})?o.apply(e,r):o)||(t.exports=s)},427:(t,e,i)=>{"use strict";i(943),i(400),i(209),i(723),i(240),i(893),i(668),i(549),i(605)}},t=>{t.O(0,[592],(()=>{return e=427,t(t.s=e);var e}));t.O()}]);