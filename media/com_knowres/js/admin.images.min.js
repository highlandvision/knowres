"use strict";document.addEventListener("DOMContentLoaded",function(){let previewNode=document.querySelector("#template");previewNode.id="";var previewTemplate=previewNode.parentNode.innerHTML;previewNode.parentNode.removeChild(previewNode),Dropzone.autoDiscover=!0;const formdata=document.getElementById("dropzonedata");let myDropzone=new Dropzone(document.body,{url:formdata.dataset.url,uploadMultiple:!0,previewTemplate:previewTemplate,createImageThumbnails:!0,thumbnailWidth:90,thumbnailHeight:60,thumbnailMethod:"crop",autoQueue:!1,autoProcessQueue:!1,previewsContainer:"#previews",clickable:".fileinput-button",parallelUploads:100,maxFiles:100});myDropzone.on("addedfile",function(file){file.previewElement.querySelector(".start").onclick=function(){myDropzone.enqueueFile(file)}}),myDropzone.on("sending",function(file,xhr,formData){formData.append("property_id",formdata.dataset.property_id),formData.append(formdata.dataset.token,"1"),document.querySelector("#total-progress").style.opacity="1",file.previewElement.querySelector(".start").setAttribute("disabled","disabled")}),myDropzone.on("totaluploadprogress",function(progress){document.querySelector("#total-progress .progress-bar").style.width=progress+"%"}),myDropzone.on("queuecomplete",function(){0===myDropzone.getUploadingFiles().length&&0===myDropzone.getQueuedFiles().length&&(document.querySelector("#total-progress").style.opacity="0",window.location.reload())}),document.querySelector("#actions .start").onclick=function(){myDropzone.enqueueFiles(myDropzone.getFilesWithStatus(Dropzone.ADDED)),myDropzone.processQueue()},document.querySelector("#actions .cancel").onclick=function(){myDropzone.removeAllFiles(!0)}},!1);